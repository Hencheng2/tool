<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Visual Page Builder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* ===== Base Styles ===== */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; background: #0b1220; color: #fff; display: flex; height: 100vh; overflow: hidden; }
    h3 { font-size: 14px; margin: 6px 0; }
    button { cursor: pointer; }

    /* ===== Sidebar (Palette) ===== */
    #palette {
      width: 260px; background: #111827; color: #fff;
      overflow-y: auto; padding: 10px; border-right: 1px solid #222;
    }
    .category { margin-bottom: 10px; }
    .category h3 { background: #1f2937; padding: 6px; cursor: pointer; }
    .elements { padding-left: 10px; display: none; }
    .element { background: #374151; margin: 4px 0; padding: 6px; border-radius: 4px; cursor: grab; }
    .element:hover { background: #4b5563; }
    .category.active .elements { display: block; }

    /* ===== Canvas ===== */
    #canvas {
      flex: 1; background: #1e293b; margin: 10px; border: 2px dashed #334155;
      overflow: auto; padding: 20px; position: relative;
    }
    .drop-target { min-height: 80px; }
    .selected { outline: 2px solid #3b82f6; }

    /* ===== Inspector ===== */
    #inspector {
      width: 300px; background: #111827; color: #fff;
      border-left: 1px solid #222; padding: 10px; overflow-y: auto;
    }
    #inspector label { display: block; margin: 6px 0 2px; font-size: 13px; }
    #inspector input, #inspector select, #inspector textarea {
      width: 100%; padding: 6px; background: #1f2937; color: #fff; border: 1px solid #374151; border-radius: 4px;
    }

    /* ===== Output ===== */
    #output {
      position: absolute; bottom: 0; left: 0; right: 0; height: 200px;
      background: #0f172a; color: #fff; display: flex; border-top: 2px solid #222;
    }
    .code-block { flex: 1; display: flex; flex-direction: column; }
    .code-block textarea { flex: 1; background: #1e293b; color: #fff; font-family: monospace; padding: 6px; }
    .code-block button { background: #3b82f6; border: none; padding: 6px; color: #fff; cursor: pointer; }
  </style>
</head>
<body>

  <!-- Palette -->
  <div id="palette">
    <div class="category">
      <h3>Icons</h3>
      <div class="elements">
        <div class="element" draggable="true" data-html="<span>üè† Home</span>">Home Icon</div>
        <div class="element" draggable="true" data-html="<span>üîç Search</span>">Search Icon</div>
        <div class="element" draggable="true" data-html="<span>‚ù§Ô∏è Like</span>">Heart Icon</div>
      </div>
    </div>
    <div class="category">
      <h3>Navigation</h3>
      <div class="elements">
        <div class="element" draggable="true" data-html="<nav style='display:flex;gap:10px;'><a href='#'>Home</a><a href='#'>About</a><a href='#'>Contact</a></nav>">Top Nav</div>
        <div class="element" draggable="true" data-html="<div style='width:200px;background:#222;padding:10px;'><a href='#'>Dashboard</a></div>">Sidebar</div>
      </div>
    </div>
    <div class="category">
      <h3>Buttons</h3>
      <div class="elements">
        <div class="element" draggable="true" data-html="<button style='padding:10px 20px;background:#3b82f6;color:#fff;border:none;border-radius:4px;'>Click Me</button>">Primary Button</div>
        <div class="element" draggable="true" data-html="<button style='padding:10px 20px;background:transparent;color:#3b82f6;border:1px solid #3b82f6;border-radius:4px;'>Secondary</button>">Secondary Button</div>
      </div>
    </div>
    <div class="category">
      <h3>Forms</h3>
      <div class="elements">
        <div class="element" draggable="true" data-html="<input type='text' placeholder='Enter text' style='padding:8px;border:1px solid #666;border-radius:4px;'>">Text Input</div>
        <div class="element" draggable="true" data-html="<textarea placeholder='Message' style='padding:8px;border:1px solid #666;border-radius:4px;'></textarea>">Textarea</div>
      </div>
    </div>
    <div class="category">
      <h3>Cards</h3>
      <div class="elements">
        <div class="element" draggable="true" data-html="<div style='border:1px solid #555;border-radius:6px;padding:10px;'><h4>Card Title</h4><p>Some description here.</p></div>">Simple Card</div>
      </div>
    </div>
  </div>

  <!-- Canvas -->
  <div id="canvas" class="drop-target">
    <p style="color:#666;">Drag elements here</p>
  </div>

  <!-- Inspector -->
  <div id="inspector">
    <h3>Inspector</h3>
    <p>No element selected</p>
  </div>

  <!-- Code Output -->
  <div id="output">
    <div class="code-block">
      <button onclick="copyCode('htmlOutput')">Copy HTML</button>
      <textarea id="htmlOutput"></textarea>
    </div>
    <div class="code-block">
      <button onclick="copyCode('cssOutput')">Copy CSS</button>
      <textarea id="cssOutput"></textarea>
    </div>
    <div class="code-block">
      <button onclick="copyCode('jsOutput')">Copy JS</button>
      <textarea id="jsOutput"></textarea>
    </div>
  </div>

  <script>
    /* ===== Expand/Collapse Palette ===== */
    document.querySelectorAll('.category h3').forEach(h3 => {
      h3.addEventListener('click', () => h3.parentElement.classList.toggle('active'));
    });

    /* ===== Drag & Drop ===== */
    const canvas = document.getElementById('canvas');
    let draggedHtml = null;

    document.querySelectorAll('.element').forEach(el => {
      el.addEventListener('dragstart', e => {
        draggedHtml = el.dataset.html;
      });
    });

    canvas.addEventListener('dragover', e => e.preventDefault());
    canvas.addEventListener('drop', e => {
      e.preventDefault();
      if (draggedHtml) {
        const wrapper = document.createElement('div');
        wrapper.innerHTML = draggedHtml;
        const node = wrapper.firstChild;
        node.classList.add('draggable-item');
        node.addEventListener('click', () => selectElement(node));
        canvas.appendChild(node);
        updateOutputs();
      }
    });

    /* ===== Inspector ===== */
    const inspector = document.getElementById('inspector');
    let selected = null;

    function selectElement(el) {
      if (selected) selected.classList.remove('selected');
      selected = el;
      el.classList.add('selected');
      renderInspector(el);
    }

    function renderInspector(el) {
      inspector.innerHTML = '';
      const h = document.createElement('h3');
      h.textContent = 'Inspector';
      inspector.appendChild(h);

      // Content
      if (el.innerText) {
        const label = document.createElement('label');
        label.textContent = 'Text';
        const input = document.createElement('input');
        input.value = el.innerText;
        input.addEventListener('input', () => { el.innerText = input.value; updateOutputs(); });
        inspector.append(label, input);
      }

      // Background color
      const bgLabel = document.createElement('label');
      bgLabel.textContent = 'Background';
      const bgInput = document.createElement('input');
      bgInput.type = 'color';
      bgInput.value = rgbToHex(getComputedStyle(el).backgroundColor || '#000000');
      bgInput.addEventListener('input', () => { el.style.background = bgInput.value; updateOutputs(); });
      inspector.append(bgLabel, bgInput);

      // Text color
      const colorLabel = document.createElement('label');
      colorLabel.textContent = 'Text Color';
      const colorInput = document.createElement('input');
      colorInput.type = 'color';
      colorInput.value = rgbToHex(getComputedStyle(el).color || '#ffffff');
      colorInput.addEventListener('input', () => { el.style.color = colorInput.value; updateOutputs(); });
      inspector.append(colorLabel, colorInput);

      // Font size
      const fsLabel = document.createElement('label');
      fsLabel.textContent = 'Font Size';
      const fsInput = document.createElement('input');
      fsInput.type = 'number';
      fsInput.value = parseInt(getComputedStyle(el).fontSize) || 16;
      fsInput.addEventListener('input', () => { el.style.fontSize = fsInput.value + 'px'; updateOutputs(); });
      inspector.append(fsLabel, fsInput);
    }

    function rgbToHex(rgb) {
      if (!rgb) return '#000000';
      const result = rgb.match(/\d+/g);
      return result ? "#" + result.slice(0,3).map(x => (+x).toString(16).padStart(2,0)).join('') : '#000000';
    }

    /* ===== Code Output ===== */
    function updateOutputs() {
      document.getElementById('htmlOutput').value = canvas.innerHTML;
      document.getElementById('cssOutput').value = "/* Add your CSS here */";
      document.getElementById('jsOutput').value = "// Add your JS here";
    }

    function copyCode(id) {
      const text = document.getElementById(id).value;
      navigator.clipboard.writeText(text).then(() => alert('Copied!'));
    }
  </script>
</body>
</html>
