<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Webpage Designer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    .draggable { cursor: grab; }
    .workspace { min-height: 400px; }
    textarea { font-family: monospace; }
  </style>
</head>
<body class="bg-gray-900 text-gray-200 h-screen flex flex-col">

  <!-- Header -->
  <header class="p-4 bg-gray-800 shadow flex justify-between items-center">
    <h1 class="text-xl font-bold">âš¡ Webpage Designer</h1>
    <button id="togglePreview" class="bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg">Switch to View Preview</button>
  </header>

  <main class="flex flex-1 overflow-hidden">

    <!-- Elements Library -->
    <aside class="w-1/5 bg-gray-800 p-4 overflow-y-auto border-r border-gray-700">
      <h2 class="font-semibold mb-2">Elements</h2>
      <div id="elements" class="space-y-2">
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="button">Button</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="navbar">Navbar</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="input">Input</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="card">Card</div>
      </div>
    </aside>

    <!-- Workspace & Code Preview -->
    <section class="flex-1 flex flex-col">
      <!-- Edit Preview -->
      <div id="editPreview" class="flex-1 flex">
        <!-- Workspace -->
        <div id="workspace" class="workspace flex-1 bg-gray-950 m-4 rounded-lg p-4 border border-gray-700 overflow-auto">
          <p class="text-gray-500">Drag elements here...</p>
        </div>

        <!-- Code Area -->
        <div class="w-1/3 bg-gray-800 p-4 overflow-y-auto border-l border-gray-700">
          <h2 class="font-semibold mb-2">Generated Code</h2>

          <div class="mb-4">
            <label class="block text-sm mb-1">HTML</label>
            <textarea id="htmlCode" class="w-full h-32 bg-gray-900 text-gray-100 p-2 rounded"></textarea>
            <div class="flex gap-2 mt-1">
              <button onclick="copyCode('htmlCode')" class="bg-indigo-600 px-2 py-1 rounded">Copy</button>
            </div>
          </div>

          <div class="mb-4">
            <label class="block text-sm mb-1">CSS</label>
            <textarea id="cssCode" class="w-full h-32 bg-gray-900 text-gray-100 p-2 rounded"></textarea>
            <div class="flex gap-2 mt-1">
              <button onclick="copyCode('cssCode')" class="bg-indigo-600 px-2 py-1 rounded">Copy</button>
              <button onclick="generateCSS()" class="bg-green-600 px-2 py-1 rounded">Generate Modern</button>
            </div>
          </div>

          <div class="mb-4">
            <label class="block text-sm mb-1">JS</label>
            <textarea id="jsCode" class="w-full h-32 bg-gray-900 text-gray-100 p-2 rounded"></textarea>
            <div class="flex gap-2 mt-1">
              <button onclick="copyCode('jsCode')" class="bg-indigo-600 px-2 py-1 rounded">Copy</button>
              <button onclick="generateJS()" class="bg-green-600 px-2 py-1 rounded">Generate Modern</button>
            </div>
          </div>

        </div>
      </div>

      <!-- View Preview -->
      <div id="viewPreview" class="hidden flex-1 bg-gray-950 m-4 rounded-lg p-4 border border-gray-700 overflow-auto"></div>
    </section>
  </main>

  <script>
    const elements = document.querySelectorAll('.draggable');
    const workspace = document.getElementById('workspace');
    const htmlCode = document.getElementById('htmlCode');
    const cssCode = document.getElementById('cssCode');
    const jsCode = document.getElementById('jsCode');
    const viewPreview = document.getElementById('viewPreview');
    const togglePreviewBtn = document.getElementById('togglePreview');

    // Drag and drop handling
    elements.forEach(el => {
      el.addEventListener('dragstart', e => {
        e.dataTransfer.setData('type', e.target.dataset.type);
      });
    });

    workspace.addEventListener('dragover', e => e.preventDefault());
    workspace.addEventListener('drop', e => {
      e.preventDefault();
      const type = e.dataTransfer.getData('type');
      let newEl;
      switch (type) {
        case 'button':
          newEl = document.createElement('button');
          newEl.textContent = 'Button';
          newEl.className = 'bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded m-2';
          break;
        case 'navbar':
          newEl = document.createElement('nav');
          newEl.className = 'flex space-x-4 bg-gray-800 p-2 rounded';
          newEl.innerHTML = '<a href="#" class="text-white">Home</a><a href="#" class="text-gray-400 hover:text-white">About</a>';
          break;
        case 'input':
          newEl = document.createElement('input');
          newEl.placeholder = 'Enter text';
          newEl.className = 'bg-gray-700 text-white p-2 rounded m-2';
          break;
        case 'card':
          newEl = document.createElement('div');
          newEl.className = 'bg-gray-800 p-4 rounded-lg shadow m-2';
          newEl.innerHTML = '<h3 class="text-lg font-semibold">Card Title</h3><p class="text-gray-400">Card content...</p>';
          break;
      }
      if (newEl) {
        workspace.appendChild(newEl);
        updateCode();
      }
    });

    function updateCode() {
      htmlCode.value = workspace.innerHTML.trim();
    }

    function copyCode(id) {
      const el = document.getElementById(id);
      el.select();
      document.execCommand('copy');
    }

    function generateCSS() {
      cssCode.value = `/* Modern dark theme styles */\nbody { background: #111; color: #eee; font-family: sans-serif; }\nbutton { transition: all 0.3s ease; }\nbutton:hover { transform: scale(1.05); }`;
    }

    function generateJS() {
      jsCode.value = `// Example modern JS interactivity\nconst buttons = document.querySelectorAll('button');\nbuttons.forEach(btn => btn.addEventListener('click', () => alert('Button clicked!')));`;
    }

    togglePreviewBtn.addEventListener('click', () => {
      if (viewPreview.classList.contains('hidden')) {
        viewPreview.classList.remove('hidden');
        document.getElementById('editPreview').classList.add('hidden');
        viewPreview.innerHTML = htmlCode.value;
        togglePreviewBtn.textContent = 'Switch to Edit Preview';
      } else {
        viewPreview.classList.add('hidden');
        document.getElementById('editPreview').classList.remove('hidden');
        togglePreviewBtn.textContent = 'Switch to View Preview';
      }
    });
  </script>

</body>
</html>
