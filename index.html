<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Webpage Designer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .draggable { cursor: grab; }
    .workspace { min-height: 400px; }
    textarea { font-family: monospace; }
    .selected { outline: 2px dashed #6366f1; }
  </style>
</head>
<body class="bg-gray-900 text-gray-200 h-screen flex flex-col">

  <!-- Header -->
  <header id="appHeader" class="p-4 bg-gray-800 shadow flex justify-between items-center">
    <h1 class="text-xl font-bold">âš¡ Webpage Designer</h1>
    <button id="togglePreview" class="bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg">Switch to View Preview</button>
  </header>

  <main id="appMain" class="flex flex-1 overflow-hidden">

    <!-- Elements Library -->
    <aside id="elementsPanel" class="w-1/5 bg-gray-800 p-4 overflow-y-auto border-r border-gray-700">
      <h2 class="font-semibold mb-2">Elements</h2>
      <div id="elements" class="space-y-2">
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="button">Button</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="navbar">Navbar</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="input">Input</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="card">Card</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="image">Image</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="section">Section</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="footer">Footer</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="heading">Heading</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="paragraph">Paragraph</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="list">List</div>
        <div class="draggable bg-gray-700 p-2 rounded" draggable="true" data-type="video">Video</div>
      </div>
    </aside>

    <!-- Workspace & Properties -->
    <section class="flex-1 flex flex-col">
      <!-- Edit Preview -->
      <div id="editPreview" class="flex-1 flex overflow-hidden">
        <!-- Workspace -->
        <div id="workspace" class="workspace flex-1 bg-gray-950 m-4 rounded-lg p-4 border border-gray-700 overflow-auto">
          <p class="text-gray-500">Drag elements here...</p>
        </div>

        <!-- Properties -->
        <div id="propertiesPanel" class="w-1/3 bg-gray-800 p-4 overflow-y-auto border-l border-gray-700">
          <h2 class="font-semibold mb-2">Properties</h2>
          <div id="properties" class="space-y-2 text-sm text-gray-300">
            <p>Select an element to edit its properties.</p>
          </div>
        </div>
      </div>

      <!-- Code Area at Bottom -->
      <div id="codePanel" class="bg-gray-800 p-4 border-t border-gray-700 grid grid-cols-3 gap-4">
        <div>
          <label class="block text-sm mb-1">HTML</label>
          <textarea id="htmlCode" class="w-full h-32 bg-gray-900 text-gray-100 p-2 rounded"></textarea>
          <div class="flex gap-2 mt-1">
            <button onclick="copyCode('htmlCode')" class="bg-indigo-600 px-2 py-1 rounded">Copy</button>
          </div>
        </div>

        <div>
          <label class="block text-sm mb-1">CSS</label>
          <textarea id="cssCode" class="w-full h-32 bg-gray-900 text-gray-100 p-2 rounded"></textarea>
          <div class="flex gap-2 mt-1">
            <button onclick="copyCode('cssCode')" class="bg-indigo-600 px-2 py-1 rounded">Copy</button>
            <button onclick="generateCSS()" class="bg-green-600 px-2 py-1 rounded">Generate Modern</button>
          </div>
        </div>

        <div>
          <label class="block text-sm mb-1">JS</label>
          <textarea id="jsCode" class="w-full h-32 bg-gray-900 text-gray-100 p-2 rounded"></textarea>
          <div class="flex gap-2 mt-1">
            <button onclick="copyCode('jsCode')" class="bg-indigo-600 px-2 py-1 rounded">Copy</button>
            <button onclick="generateJS()" class="bg-green-600 px-2 py-1 rounded">Generate Modern</button>
          </div>
        </div>
      </div>

      <!-- View Preview -->
      <div id="viewPreview" class="hidden flex-1 bg-gray-950 m-4 rounded-lg p-4 border border-gray-700 overflow-auto"></div>
    </section>
  </main>

  <script>
    const elements = document.querySelectorAll('.draggable');
    const workspace = document.getElementById('workspace');
    const htmlCode = document.getElementById('htmlCode');
    const cssCode = document.getElementById('cssCode');
    const jsCode = document.getElementById('jsCode');
    const viewPreview = document.getElementById('viewPreview');
    const togglePreviewBtn = document.getElementById('togglePreview');
    const propertiesPanel = document.getElementById('properties');

    let selectedElement = null;

    // Drag and drop handling
    elements.forEach(el => {
      el.addEventListener('dragstart', e => {
        e.dataTransfer.setData('type', e.target.dataset.type);
      });
    });

    workspace.addEventListener('dragover', e => e.preventDefault());
    workspace.addEventListener('drop', e => {
      e.preventDefault();
      const type = e.dataTransfer.getData('type');
      let newEl;
      switch (type) {
        case 'button':
          newEl = document.createElement('button');
          newEl.textContent = 'Button';
          newEl.className = 'bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded m-2';
          break;
        case 'navbar':
          newEl = document.createElement('nav');
          newEl.className = 'flex space-x-4 bg-gray-800 p-2 rounded';
          newEl.innerHTML = '<a href="#" class="text-white">Home</a><a href="#" class="text-gray-400 hover:text-white">About</a>';
          break;
        case 'input':
          newEl = document.createElement('input');
          newEl.placeholder = 'Enter text';
          newEl.className = 'bg-gray-700 text-white p-2 rounded m-2';
          break;
        case 'card':
          newEl = document.createElement('div');
          newEl.className = 'bg-gray-800 p-4 rounded-lg shadow m-2';
          newEl.innerHTML = '<h3 class="text-lg font-semibold">Card Title</h3><p class="text-gray-400">Card content...</p>';
          break;
        case 'image':
          newEl = document.createElement('img');
          newEl.src = 'https://via.placeholder.com/150';
          newEl.className = 'm-2 rounded';
          break;
        case 'section':
          newEl = document.createElement('section');
          newEl.className = 'bg-gray-800 p-6 rounded-lg m-2';
          newEl.innerHTML = '<h2 class="text-xl font-bold">Section Title</h2><p class="text-gray-400">Section content...</p>';
          break;
        case 'footer':
          newEl = document.createElement('footer');
          newEl.className = 'bg-gray-800 p-4 text-center text-gray-400 m-2 rounded';
          newEl.textContent = 'Footer content';
          break;
        case 'heading':
          newEl = document.createElement('h1');
          newEl.textContent = 'Heading';
          newEl.className = 'text-2xl font-bold m-2';
          break;
        case 'paragraph':
          newEl = document.createElement('p');
          newEl.textContent = 'Lorem ipsum dolor sit amet...';
          newEl.className = 'm-2 text-gray-300';
          break;
        case 'list':
          newEl = document.createElement('ul');
          newEl.className = 'list-disc list-inside m-2';
          newEl.innerHTML = '<li>Item 1</li><li>Item 2</li>';
          break;
        case 'video':
          newEl = document.createElement('video');
          newEl.src = '';
          newEl.controls = true;
          newEl.className = 'm-2 w-64 rounded';
          break;
      }
      if (newEl) {
        makeSelectable(newEl);
        workspace.appendChild(newEl);
        updateCode();
      }
    });

    function makeSelectable(el) {
      el.addEventListener('click', e => {
        e.stopPropagation();
        if (selectedElement) selectedElement.classList.remove('selected');
        selectedElement = el;
        el.classList.add('selected');
        showProperties(el);
      });
    }

    workspace.addEventListener('click', () => {
      if (selectedElement) selectedElement.classList.remove('selected');
      selectedElement = null;
      propertiesPanel.innerHTML = '<p>Select an element to edit its properties.</p>';
    });

    function showProperties(el) {
      propertiesPanel.innerHTML = '';
      if (el.tagName === 'BUTTON' || el.tagName === 'A' || el.tagName === 'H1' || el.tagName === 'P' || el.tagName === 'LI') {
        propertiesPanel.innerHTML += `
          <label class='block'>Text: <input type='text' value='${el.textContent}' class='w-full bg-gray-700 p-1 rounded' oninput='updateElementText(this.value)'></label>`;
      }
      if (el.tagName === 'INPUT') {
        propertiesPanel.innerHTML += `
          <label class='block'>Placeholder: <input type='text' value='${el.placeholder}' class='w-full bg-gray-700 p-1 rounded' oninput='updateElementPlaceholder(this.value)'></label>`;
      }
      if (el.tagName === 'IMG' || el.tagName === 'VIDEO') {
        propertiesPanel.innerHTML += `
          <label class='block'>Source URL: <input type='text' value='${el.src}' class='w-full bg-gray-700 p-1 rounded' oninput='updateElementSrc(this.value)'></label>`;
      }
      // Common style editing
      propertiesPanel.innerHTML += `
        <label class='block mt-2'>Font Size: <input type='number' value='${parseInt(window.getComputedStyle(el).fontSize) || 16}' class='w-full bg-gray-700 p-1 rounded' oninput='updateFontSize(this.value)'></label>
        <label class='block mt-2'>Color: <input type='color' value='${rgbToHex(window.getComputedStyle(el).color)}' class='w-full bg-gray-700 p-1 rounded' oninput='updateColor(this.value)'></label>
        <label class='block mt-2'>Background: <input type='color' value='${rgbToHex(window.getComputedStyle(el).backgroundColor)}' class='w-full bg-gray-700 p-1 rounded' oninput='updateBackground(this.value)'></label>
        <label class='block mt-2'>Padding: <input type='number' value='${parseInt(window.getComputedStyle(el).padding) || 0}' class='w-full bg-gray-700 p-1 rounded' oninput='updatePadding(this.value)'></label>
      `;
    }

    function updateElementText(val) {
      if (selectedElement) { selectedElement.textContent = val; updateCode(); }
    }
    function updateElementPlaceholder(val) {
      if (selectedElement) { selectedElement.placeholder = val; updateCode(); }
    }
    function updateElementSrc(val) {
      if (selectedElement) { selectedElement.src = val; updateCode(); }
    }
    function updateFontSize(val) {
      if (selectedElement) { selectedElement.style.fontSize = val + 'px'; updateCode(); }
    }
    function updateColor(val) {
      if (selectedElement) { selectedElement.style.color = val; updateCode(); }
    }
    function updateBackground(val) {
      if (selectedElement) { selectedElement.style.backgroundColor = val; updateCode(); }
    }
    function updatePadding(val) {
      if (selectedElement) { selectedElement.style.padding = val + 'px'; updateCode(); }
    }

    function rgbToHex(rgb) {
      if (!rgb) return '#000000';
      const result = rgb.match(/\d+/g);
      return result ? "#" + result.slice(0,3).map(x=>("0"+parseInt(x).toString(16)).slice(-2)).join("") : '#000000';
    }

    function updateCode() {
      htmlCode.value = workspace.innerHTML.trim();
    }

    function copyCode(id) {
      const el = document.getElementById(id);
      el.select();
      document.execCommand('copy');
    }

    function generateCSS() {
      cssCode.value = `/* Modern dark theme styles */\nbody { background: #111; color: #eee; font-family: sans-serif; }\nbutton { transition: all 0.3s ease; }\nbutton:hover { transform: scale(1.05); }`;
    }

    function generateJS() {
      jsCode.value = `// Example modern JS interactivity\nconst buttons = document.querySelectorAll('button');\nbuttons.forEach(btn => btn.addEventListener('click', () => alert('Button clicked!')));`;
    }

    togglePreviewBtn.addEventListener('click', () => {
      if (viewPreview.classList.contains('hidden')) {
        // Switch to View Mode
        viewPreview.classList.remove('hidden');
        document.getElementById('editPreview').classList.add('hidden');
        document.getElementById('elementsPanel').classList.add('hidden');
        document.getElementById('propertiesPanel').classList.add('hidden');
        document.getElementById('codePanel').classList.add('hidden');
        viewPreview.innerHTML = htmlCode.value;
        togglePreviewBtn.textContent = 'Switch to Edit Preview';
      } else {
        // Switch to Edit Mode
        viewPreview.classList.add('hidden');
        document.getElementById('editPreview').classList.remove('hidden');
        document.getElementById('elementsPanel').classList.remove('hidden');
        document.getElementById('propertiesPanel').classList.remove('hidden');
        document.getElementById('codePanel').classList.remove('hidden');
        togglePreviewBtn.textContent = 'Switch to View Preview';
      }
    });
  </script>

</body>
</html>
